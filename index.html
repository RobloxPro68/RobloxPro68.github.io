<!DOCTYPE html>
<html>
<head>
  <title>Proxy Dashboard</title>
  <style>
    body {
      background-color: #111;
      color: #0f0;
      font-family: monospace;
      padding: 20px;
    }
    .hidden { display: none; }
    .player { margin-bottom: 10px; }
    input, button, select {
      background: #222;
      color: #0f0;
      border: 1px solid #0f0;
      padding: 5px;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div id="keyScreen">
    <h2>Enter Access Key</h2>
    <input type="password" id="accessKey" placeholder="Enter key here">
    <br><br>
    <button onclick="checkKey()">Submit</button>
  </div>

  <div id="mainScreen" class="hidden">
    <h2>Proxy Dashboard</h2>

    <button onclick="askPlayers()">How many players are in the server?</button>
    <button onclick="addPlayer()">Add New Player</button>
    <div id="playerList"></div>

    <h3>Crash Players</h3>
    <select id="crashSelect" multiple size="5" style="width: 300px;"></select>
    <br>
    <button onclick="crashSelected()">Crash Selected</button>

    <div style="margin-top: 20px;">
      <button onclick="unbanUser()">Unban</button>
      <br><br>
      <input type="text" id="unbanInput" placeholder="Input new username here" style="padding:5px;width:200px;">
    </div>
  </div>

  <script>
    const validKeys = [
      "8KdLmRpxzUQ?TfV9nEZ?",
      "2JkLZQsoiAE?MMs4jBF?",
      "9WxNpCvLuIB?QdK6yMT?",
      "4HjTfMvXzYE?LBq3cVN?",
      "7RmQzKyVoSD?PkT8aXW?"
    ];

    const players = [];

    function getRandomIP() {
      return `${rand(10,255)}.${rand(0,255)}.${rand(0,255)}.${rand(0,255)}`;
    }

    function getRandomMAC() {
      let mac = '';
      for (let i = 0; i < 6; i++) {
        mac += Math.floor(Math.random() * 256).toString(16).padStart(2, '0');
        if (i < 5) mac += ':';
      }
      return mac.toUpperCase();
    }

    function getPing() {
      return rand(30, 150) + 'ms';
    }

    function rand(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function checkKey() {
      const key = document.getElementById('accessKey').value.trim();
      if (validKeys.includes(key)) {
        document.getElementById('keyScreen').classList.add('hidden');
        document.getElementById('mainScreen').classList.remove('hidden');
      } else {
        alert("Invalid key.");
      }
    }

    function askPlayers() {
      const count = parseInt(prompt("How many players are in the server?"));
      if (!isNaN(count)) {
        for (let i = players.length; i < count; i++) {
          addPlayer();
        }
      }
    }

    function addPlayer() {
      const ip = getRandomIP();
      const mac = getRandomMAC();
      const ping = getPing();
      const name = `Player${players.length + 1}`;

      const player = {
        name,
        ip,
        mac,
        ping,
        crashed: false
      };

      players.push(player);
      renderPlayers();
    }

    function renderPlayers() {
      const list = document.getElementById('playerList');
      const select = document.getElementById('crashSelect');
      list.innerHTML = '';
      select.innerHTML = '';

      players.forEach((p, i) => {
        const div = document.createElement('div');
        div.className = 'player';
        div.innerText = `${p.name} - IP: ${p.ip} | MAC: ${p.mac} | Ping: ${p.ping}` + (p.crashed ? ' (CRASHED)' : '');
        list.appendChild(div);

        if (!p.crashed) {
          const option = document.createElement('option');
          option.value = i;
          option.innerText = p.name;
          select.appendChild(option);
        }
      });
    }

    function crashSelected() {
      const select = document.getElementById('crashSelect');
      const selected = Array.from(select.selectedOptions).map(opt => parseInt(opt.value));
      selected.forEach(i => {
        players[i].crashed = true;
      });
      renderPlayers();
    }

    function unbanUser() {
      const username = document.getElementById('unbanInput').value.trim();
      if (username) {
        alert(`User "${username}" has been unbanned (simulated).`);
      } else {
        alert("Please enter a username.");
      }
    }
  </script>
</body>
</html>
